<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
		<style>
        
            /* Note: css styles will be overwritten by D3 attributes  */
            
            body {
                background-color: #414042;
            }
            
            p {
                font-size: 10px;
                color: black;
                background-color: white;
                font-style: bold;
                font-family: sans-serif;
            }
            
            .tooltip  {
                background-color: steelblue;
                font-family: sans-serif;
                font-size: 10px;
            }

            
            svg {
	            width: 960px;
	            height: 300px;
            }            
            
            #radial svg, #radialtest svg {
                background-color: #58595B;
	            height: 400px;
            }
                         
            /*svg {
                shape-rendering: crispEdges;
            }*/
		</style>
		
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script src="d3-circularheat/js/circularHeatChart.js"></script>         
       
        <p>Test heat map</p>
        <div id = radialtest> </div>
        
        <p>Product test heat map</p>
        <div id = radial> </div>
        
         <p id="debug">
            <b>Debug info</b>
            <br>
         </p>
        
        </div>
    </head>
    <body>	
		
		
		
    <script>
        //https://github.com/nsonnad/d3-datavis/blob/master/us-energy-use/us-historical-energy.html
        /*
        var allData; // first
        d3.csv("merged_db_20130308.csv", function(error, data) { // third
            allData = data;
            console.log(allData);       
            var countryArray = new Array(1);
            var yearsArray = new Array(1);
            data.forEach(function(d) {
                //document.getElementById("debug").innerHTML += "d: " + d.YEARS + " <br>";  
                countryArray.push(d.COUNTRY);
                yearsArray.push(d.YEARS);                
               // document.getElementById("debug").innerHTML += "country: " + d.COUNTRY + " <br>";  
              //  document.getElementById("debug").innerHTML += "years: " + d.YEARS + " <br>";  
                if (d.COUNTRY ) {
                    d.YEARS = +d.YEARS;
                }
            });
        */    
            //d3.json('rainfall.json', function(rainfallData) {
   
            /* Label data */
            //var hours = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];
            //var years = [];
            //for(var i = 1980; i < 2011; i++)
            //    i % 10 === 0 ? years.push(i) : years.push('');-
         
            /* Create the chart */
            /*
            var chart = circularHeatChart()
                .segmentHeight(5)
                .innerRadius(20)
                .numSegments(12)
                .domain([50, 200])
                .range(['white', 'blue'])
                //.segmentLabels(months)
                //.radialLabels(years);
            
            d3.select('radial')
                .selectAll('svg')
                .data([data])
                .enter()
                .append('svg')
                .call(chart);
                */
        
        //test cirularHeatChart        
        var chart = circularHeatChart()
            .segmentHeight(20)
            .innerRadius(20)
            .numSegments(24)
            .radialLabels(["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"])
            .segmentLabels(["Midnight", "1am", "2am", "3am", "4am", "5am", "6am", "7am", "8am", "9am", "10am", "11am", "Midday", "1pm", "2pm", "3pm", "4pm", "5pm", "6pm", "7pm", "8pm", "9pm", "10pm", "11pm"])
            .margin({top: 20, right: 0, bottom: 20, left: 280});

        var energyData = [
            0.176042,0.096146,0.076414,0.334734,0.132583,0.135422,0.060884,0.768601,0.230771,0.07572,0.210855,0.090938,0.094296,0.290368,0.093755,0.099166,0.429278,0.962314,0.43833,0.244464,0.550621,0.173093,0.103659,0.0773,
            0.265913,0.099811,0.076164,0.3154,0.146557,0.108531,0.421608,0.120872,0.061825,0.101988,0.095364,0.365022,0.096741,0.095962,0.06409,0.300409,0.102083,0.134949,0.535842,0.224584,0.227262,0.28274,0.11842,0.062601,
            0.103968,0.088054,0.069683,0.141973,0.106082,0.135513,0.09906,0.099516,0.31927,0.097133,0.08595,0.067532,0.096042,0.09789,0.059053,0.11167,0.137408,0.109005,0.365752,0.179085,0.135975,0.199275,0.144186,0.053961,
            0.088226,0.09218,0.059777,0.125663,0.136192,0.121279,0.146825,0.267907,0.113706,0.09266,0.105833,0.130221,0.09695,0.078355,0.067088,0.093888,0.096131,0.152373,0.072957,0.095516,0.091731,0.14403,0.113989,0.089659,
            0.089808,0.085082,0.057542,0.09864,0.091152,0.066592,0.20529,0.12785,0.077798,0.071004,0.094316,0.088963,0.054368,0.091964,0.095114,0.071649,0.076153,0.150208,0.15751,0.065801,0.087791,0.100653,0.121987,0.161462,
            0.096507,0.093314,0.075191,0.07723,0.091846,0.095587,0.053434,1.017331,1.458327,0.120566,0.107582,0.139082,0.112224,0.159757,0.252278,0.161521,0.124628,0.080985,0.634034,0.248268,0.20864,0.14324,0.174345,0.165649,
            0.116201,0.119975,0.133551,0.138756,0.128587,0.171464,1.328931,0.318976,0.436703,0.109017,0.1716,0.324534,0.258161,0.20793,0.169164,0.191496,0.125737,0.320198,0.272419,0.222312,0.247595,0.192478,0.134997,0.152271
           ];

        d3.select('#radialtest')
            .selectAll('svg')
            .data([energyData])
            .enter()
            .append('svg')
            .call(chart);
            
        //product test circularHeatChart
        var chart = circularHeatChart()
            .segmentHeight(50)
            .innerRadius(20)
            .numSegments(8)
            .radialLabels(["Albania", "Algeria", "Angola"])
            .segmentLabels(["Cappuccino", "Internet", "Pair of Levi's jeans", "Nike sneakers", "McDonalds meal", "Cinema ticket", "1mn prepaid mobile", "Loaf of Bread"])
            .margin({top: 20, right: 0, bottom: 20, left: 280});

        var testData = [
        1, 2, 40, 20, 7, 10, 0.2, 1,
        2, 2, 60, 40, 10, 3, 0.1, 2,
        3, 2, 20, 30, 6, 15, 0.15, 0.8,
                      ];
                       
        var realData = [
            1.31,	26.22,	91.78,	70.78,	4.59,	4.75,	0.24,	0.66,
            0.66,	24.91,	53.8,	99.46,	3.02,	1.94,	0.1,	0.13,
            3.17,	137.1,	123.39,	137.1,	15,	    14.32,	0.22,	1.37
        ]

        /*
        function normaliseData(d){
            var maxValue =  Math.max.apply(Math, d);
            
            for (var i = 0; i < d.length; i++ ) {
                d[i] = Math.round( (d[i] / maxValue)*1000 );
            }
            document.getElementById("debug").innerHTML += "maxValue: " + maxValue + "<br>";
            return d;
        }*/
        
        d3.select('#radial')
            .selectAll('svg')
            .data([realData])
            .enter()
            .append('svg')
            .call(chart);

    </script>
        
        
    </body>
</html>     
